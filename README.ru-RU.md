[In English](https://github.com/VladimirKalachikhin/e-inkDashboard/blob/master/README.md)  
# e-ink Dashboard for SignalK [![License: CC BY-NC-SA 4.0](screenshots/Cc-by-nc-sa_icon.svg)](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)

e-inkDashboard -- это расширение для SignalK, веб-приложение, которое показывает некоторые параметры от сервера SignalK на слабых (и/или старых) устройствах, таких как читалки электронных книг с экраном на электронных чернилах или старые планшеты.  
На устройство не нужно устанавливать никаких приложений. Нужен только браузер.

## v. 0.4

## Возможности
Показ:

* Скорости
* Глубины
* Истинного или магнитного курса (путевого угла, если быть точным)
* Сигнализация о выходе некоторых параметров за установленные пределы
* Русский и английский интерфейс

 ![Dashboard velocity](screenshots/db1.jpg)<br>
 ![Dashboard depth](screenshots/db2.jpg)<br>

## Требования
Операционная система семейства Linux, SignalK

## Использование
Веб-приложение оптимизировано для экранов весьма различного разрешения -- от самых маленьких до больших. Никакой настройки не требуется.  
Предполагается, что клиентское устройство оснащено чувствительным к нажатию экраном, и управление приложением происходит нажатиями на экран.  
Выбор основного отображаемого параметра осуществляется средней кнопкой в нижней части экрана, кроме того, генеральное направление движения всегда отображается серой маркой у края экрана.  
При наличии поддержки javascript на некоторых клиентских устройствах можно настроить некоторые аппаратные клавиши для переключения режимов, вызова меню оповещений и переключения между истинным и магнитным курсом. Настройка аппаратных клавиш находится внизу окна оповещений. Нажмите <img src="static/img/settings.png" alt="Settings button" width="24px">.   
По-умолчанию используются:

* Стрелка вниз для следующего режима
* Стрелка вверх для предыдущего режима
* Правая клавиша Alt для вызова меню оповещений
* Клавиша M (латинская M) для переключения между истинным и магнитным курсом
 
Может быть запущено несколько экземпляров веб-приложения, отображающих разную информацию -- в разных окнах или на разных устройствах.  
Доступ к веб-приложению осуществляется по адресу

`http://YourSignalKhost:YourSignalKport/e-inkdashboard/`  

где YourSignalKhost -- адрес компьютера, на котором работает SignalK;  
YourSignalKport -- порт на этом компьютере, на котором отвечает SignalK

Веб-приложение позволяет назначить визуальную и звуковую сигнализацию на выход некоторых параметров за установленные значения:
 ![Dashboard alarms](screenshots/db3.jpg)<br>
Для звукового сигнала может потребоваться дополнительная настройка браузера.  
Сигнализация устанавливается отдельно на каждом показывающем e-inkDashboard устройстве, и сработает только в том случае, если устройство активно и показывает e-inkDashboard. Будьте внимательны!

## Установка и конфигурирование

Установите расширение из  SignalK Appstore как **e-inkdashboard** обычным образом.  
Перезапустите SignalK  
В меню Server -> Plugin Config сервера SignalK укажите запуск расширения при старте сервера, порт, на котором будет работать веб-приложение и желаемую частоту обновления экрана веб-приложения.  
Не забывайте нажать Submit для сохранения изменений.  
Частоту обновления экрана следует установить настолько быстрой, насколько позволяет используемое устройство, с тем, чтобы важные изменения параметров (например, глубины) не были пропущены. Вместе с тем, слишком быстрое обновление экрана затруднит манипуляции с интерфейсом.

## Средства оповещения SignalK
К сожалению, SignalK не имеет никаких собственных средств реагирования на выход указанных параметров за установленные значения, что вынуждает реализовывать собственные. Однако, e-inkDashboard выставляет ограничения для скорости, глубины и курса в принятой в SignalK форме, а также размещает уведомления о выходе за эти ограничения принятым в SignalK порядком.  
Вне зависимости от этого приложение воспринимает от SignalK сообщение "Человек за бортом!" Если в этом сообщении есть информация о местоположении терпящего бедствие ([GaladrielMap SignalK edition](https://github.com/VladimirKalachikhin/GaladrielMapSK/blob/master/README.ru-RU.md) передаёт эту информацию), то отображается направление на это местоположение.

## Благодарности

* [Typicons by Stephen Hutchings](https://icon-icons.com/pack/Typicons/1144) за графические элементы интерфейса.
* [ryanflorence](https://gist.github.com/ryanflorence/701407) за идеи.

## Поддержка

[Форум](https://github.com/VladimirKalachikhin/Galadriel-map/discussions)

Форум будет живее, если вы сделаете пожертвование на [ЮМани](https://sobe.ru/na/galadrielmap).

Вы можете получить [индивидуальную платную консультацию](https://kwork.ru/training-consulting/20093293/konsultatsii-po-ustanovke-i-ispolzovaniyu-galadrielmap) по вопросам установки и использования e-ink Dashboard for Signal K .

